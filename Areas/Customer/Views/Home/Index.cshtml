<!-- Filters Section -->
<div class="container mt-4">
    <form id="filterForm" method="get">
        <div class="row g-3 align-items-center">
            <!-- Search -->
            <div class="col-md-4">
                <input type="text" id="searchBox" class="form-control" placeholder="Search product..." />
            </div>

            <!-- Category Filter -->
            <div class="col-md-3">
                <select id="categoryFilter" class="form-select" name="categoryName">
                    <option value="">All Category</option>
                    @foreach (var item in ViewBag.categories)
                    {
                        <option value="@item.Name">@item.Name</option>
                    }
                </select>
            </div>

            <!-- Price Filter -->
            <div class="col-md-3">
                <select id="priceFilter" class="form-select" name="PriceRange">
                    <option value="">All Prices</option>
                    <option value="low">Less than 100</option>
                    <option value="mid">100 - 500</option>
                    <option value="high">More than 500</option>
                </select>
            </div>

            <!-- Reset Button -->
            <div class="col-md-2 text-end">
                <button type="button" id="resetFilters" class="btn btn-secondary w-100">Reset</button>
            </div>
        </div>
    </form>
</div>

<!-- Products Section -->
<section class="py-5">
    <div class="container px-4 px-lg-5 mt-5">
        <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
            @foreach (var item in Model)
            {
                <div class="col mb-5">
                    <div class="product-card">
                        <!-- Product Image -->
                        <div class="product-img">
                            <img src="~/images/@item.Img" alt="@item.Name" />
                            <span class="badge category-badge">@item.Category.Name</span>

                            <!-- Discount badge -->
                            @if (item.Discount >= 0.2m)
                            {
                                <div class="discount-badge">
                                    -@(item.Discount * 100)% OFF
                                </div>
                            }

                            <div class="overlay">
                                <a href="/Customer/Home/Details?productId=@item.Id" class="btn btn-light btn-sm">
                                    <i class="bi bi-eye"></i> View
                                </a>
                                <a href="/Customer/Cart/AddToCart?productId=@item.Id" class="btn btn-dark btn-sm">
                                    <i class="bi bi-cart-plus"></i> Add
                                </a>
                            </div>
                        </div>
                        <!-- Product Info -->
                        <div class="product-info text-center">
                            <h5 class="fw-bold product-name">@item.Name</h5>
                            <div class="stars mb-2">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-half"></i>
                                <i class="bi bi-star"></i>
                            </div>
                            <p class="price product-price">@item.Price.ToString("c")</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- CSS Styling -->
<style>
    .product-card {
        border-radius: 20px;
        overflow: hidden;
        background: #fff;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        transition: transform 0.4s ease, box-shadow 0.4s ease;
        position: relative;
    }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
        }

    .product-img {
        position: relative;
        overflow: hidden;
    }

        .product-img img {
            width: 100%;
            height: 230px;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

    .product-card:hover .product-img img {
        transform: scale(1.1);
    }

    /* Overlay Buttons */
    .overlay {
        position: absolute;
        bottom: -60px;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 10px;
        transition: all 0.4s ease;
        opacity: 0;
    }

    .product-card:hover .overlay {
        bottom: 20px;
        opacity: 1;
    }

    .overlay .btn {
        border-radius: 30px;
        padding: 6px 14px;
        font-size: 14px;
    }

    /* Category Badge */
    .category-badge {
        position: absolute;
        top: 12px;
        left: 12px;
        background: #ff4d6d;
        color: #fff;
        font-size: 13px;
        font-weight: 600;
        padding: 5px 12px;
        border-radius: 30px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    /* Discount Badge */
    .discount-badge {
        position: absolute;
        top: 12px;
        right: 12px;
        background: #dc3545;
        color: #fff;
        font-size: 13px;
        font-weight: bold;
        padding: 5px 12px;
        border-radius: 30px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    /* Info */
    .product-info {
        padding: 15px;
    }

        .product-info h5 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #333;
        }

        .product-info .stars {
            color: #ffcc00;
            font-size: 14px;
        }

        .product-info .price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #28a745;
            margin: 0;
        }
</style>
